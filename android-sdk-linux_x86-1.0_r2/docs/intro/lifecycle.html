






















































 








<html>
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>Application Life Cycle</title>
<link rel="stylesheet" type="text/css" href="../assets/codesite/codesite.css" />
<link rel="stylesheet" type="text/css" href="../assets/codesite/codesearch.css" />
<link rel="stylesheet" type="text/css" href="../assets/codesite/semantic_headers.css" />
<link rel="stylesheet" type="text/css" href="../assets/style.css" />
<script src="../assets/search_autocomplete.js"></script>
<script src="../reference/lists.js"></script>
</head>

<body class="gc-documentation">
<div id="gc-container">
<a name="top"></a>

<div id="gc-header">
<div id="logo">
    <a href="http://code.google.com/android/"><img style="border: 0;" src="../assets-google/android-logo.gif"/></a>
</div> <!-- logo -->
</div> <!-- gc-header -->


<iframe id="backiFrame" name="backiFrame" style="display:none"></iframe>

<div id="codesiteContent" style="margin-top: 50px;">

<div id="gc-topnav">
    <span class="jd-toptitle">Android</span>
</div>

<div class="g-section g-tpl-180">

<a name="gc-toc-anchor"></a>  
<div class="g-unit g-first" id="gc-toc">
<div id="jd-searchbox" style="margin-top: 1px;">
    <input id="search_autocomplete"
            tabindex="1"
            autocomplete="off" type=text size="23"
            style="font-size:85%; color: #aaaaaa"
            value="(quick search)"
            onfocus="search_focus_changed(this, true)"
            onblur="search_focus_changed(this, false)"
            onkeydown="return search_changed(event, true, '../')"
            onkeyup="search_changed(event, false, '../')"
            onchange="search_changed(event, false, '../')"/>
    <div style="position: absolute;">
        <table id="search_filtered" class="jd-autocomplete-table-hidden"
                style="border: 1px solid #3366cc;"
                cellspacing=0>
        </table>
    </div>
</div>

<ul>
  <li>
    <h1><a href="../documentation.html">Documentation</a></h1>
    <ul>
      <li><a href="../what-is-android.html"><strong>What is Android?</strong></a></li>
      <li>
        <a href="../intro/index.html"><strong>Getting Started</strong></a>
        <ul>
          <li><a href="../intro/installing.html">Installing the SDK</a></li>
          <li><a href="../intro/upgrading.html">Upgrading the SDK</a></li>
          <li><a href="../intro/develop-and-debug.html">Developing/Debugging</a></li>
          <li><a href="../intro/hello-android.html">Hello Android</a></li>
          <li><a href="../intro/anatomy.html">Anatomy of an App</a></li>
          <li><a href="../intro/tutorial.html">Notepad Tutorial</a></li>
          <li><a href="../intro/tools.html">Development Tools</a></li>
          <li><a href="../intro/appmodel.html">Application Model</a></li>
          <li><a href="../intro/lifecycle.html">Application Life Cycle</a></li>
        </ul>
      </li>
      <li>
        <a href="../devel/index.html"><strong>Developing Applications</strong></a>
        <ul>
          <li><a href="../devel/implementing-ui.html">Implementing a UI</a></li>
          <li><a href="../devel/building-blocks.html">Building Blocks</a></li>
          <li><a href="../devel/data.html">Data Storage and Retrieval</a></li>
          <li><a href="../devel/security.html">Security Model</a></li>
          <li><a href="../devel/resources-i18n.html">Resources and i18n</a></li>
          <li><a href="../devel/sign-publish.html">Signing and Publishing Your App</a></li>
        </ul>
      </li>
      <li>  
        <a href="../toolbox/index.html"><strong>Developer Toolbox</strong></a>
        <ul>
          <li><a href="../toolbox/philosophy.html">Design Philosophy</a></li>
          <li><a href="../toolbox/custom-components.html">Building Custom Components</a></li>
          <li><a href="../toolbox/optional-apis.html">Optional APIs</a></li>
        </ul>
      </li>
      <li>  
        <a href="../reference/index.html"><strong>Reference Information</strong></a>
        <ul>
          <li><a href="../reference/packages.html">Package Index</a></li>
          <li><a href="../reference/classes.html">Class Index</a></li>
          <li><a href="../reference/hierarchy.html">Class Hierarchy</a></li>
          <li><a href="../reference/view-gallery.html">List of Views</a></li>
          <li><a href="../reference/available-intents.html">List of Intents</a></li>
          <li><a href="../reference/android/Manifest.permission.html">List of Permissions</a></li>
          <li><a href="../reference/available-resources.html">List of Resource Types</a></li>
          <li><a href="../reference/aidl.html">Android IDL</a></li>
          <li><a href="../reference/glossary.html">Glossary</a></li>
          <li><a href="../reference/keywords.html">Index</a></li>
        </ul>
      </li>
      
      <li>  
        <a href="../kb/index.html"><strong>FAQs</strong></a>
        <ul>
          <li><a href="../kb/general.html">General</a></li>
          <li><a href="../kb/commontasks.html">Common Tasks</a></li>
          <li><a href="../kb/troubleshooting.html">Troubleshooting</a></li>
          <li><a href="../kb/licensingandoss.html">Open Source Licensing</a></li>
	  <li><a href="../kb/framework.html">Application Framework</a></li>
	  <li><a href="../kb/security.html">Security</a></li>
        </ul>
      </li>
    </ul>
  </li>
  <li>
    <h1><a href="../roadmap.html">Roadmap</a></h1>
  </li>
  <li>
    <h1><a href="../goodies/index.html">Goodies</a></h1>
  </li>
</ul>


</div>

<a name="gc-pagecontent-anchor"></a>   
<div class="g-unit" id="gc-pagecontent">


<div id="jd-content">

<div class="jd-descr">
<h1>Life Cycle of an Android Application</h1>

<p>In most cases, every Android application runs in its own Linux process.
This process is created for the application when some of its code needs to
be run, and will remain running until it is no longer needed <em>and</em>
the system needs to reclaim its memory for use by other applications.</p>

<p>An unusual and fundamental feature of Android is that an application process's
lifetime is <em>not</em> directly controlled by the application itself.
Instead, it is determined by the system through a combination of the parts of the application
that the system knows are running, how important these things are to the user,
and how much overall memory is available in the system.</p>

<p>It is important that
application developers understand how different application components
(in particular <a href="../reference/android/app/Activity.html">Activity</a>, <a href="../reference/android/app/Service.html">Service</a>,
and <a href="../reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a>) impact the lifetime
of the application's process.  <strong>Not using these components correctly can
result in the system killing the application's process while it is doing
important work.</strong></p>

<p>A common example of a process life-cycle bug is a
<a href="../reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a> that starts a thread when it
receives an Intent in its <a href="../reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context, android.content.Intent)">BroadcastReceiver.onReceive()</a>
method, and then returns from the function.  Once it returns, the system
considers the BroadcastReceiver to be no longer active, and thus, its hosting
process no longer needed (unless other application components are active in
it).  So, the system may kill the process at any time to reclaim memory, and in doing so,
it terminates the spawned thread running in the process.  The solution to this problem
is to start a <a href="../reference/android/app/Service.html">Service</a> from the BroadcastReceiver, so the
system knows that there is still active work being done in the process.</p>

<p>To determine which processes should be killed when low on memory, Android
places each process into an "importance hierarchy" based on the components running in
them and the state of those components. These process types are (in order of importance):</p>

<ol>

<li>A <strong>foreground process</strong> is one that is required for
what the user is currently doing.  Various application components can
cause its containing process to be considered foreground in different
ways.  A process is considered to be in the foreground if any of the
following conditions hold:
 <ul>
  <li> It is running an <a href="../reference/android/app/Activity.html">Activity</a>
  at the top of the screen that the user is interacting with (its
  <a href="../reference/android/app/Activity.html#onResume()">onResume()</a> method has been called).</li>
  <li> It has a <a href="../reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a> that is currently running
  (its <a href="../reference/android/content/BroadcastReceiver.html#onReceive(android.content.Context, android.content.Intent)">BroadcastReceiver.onReceive()</a> method is executing).</li>
  <li>It has a <a href="../reference/android/app/Service.html">Service</a> that is currently executing code
  in one of its callbacks (<a href="../reference/android/app/Service.html#onCreate()">Service.onCreate()</a>,
  <a href="../reference/android/app/Service.html#onStart(android.content.Intent, int)">Service.onStart()</a>, or
  <a href="../reference/android/app/Service.html#onDestroy()">Service.onDestroy()</a>).</li>
 </ul>
</li>
<p>There will only ever be a few such processes in the system, and these will only
be killed as a last resort if memory is so low that not even these processes
can continue to run.  Generally, at this point, the device has
reached a memory paging state, so this action is required in order to keep the user
interface responsive.</p>
</li>

<li>A <strong>visible process</strong> is one holding an <a href="../reference/android/app/Activity.html">Activity</a>
that is visible to the user on-screen but not in the foreground (its
<a href="../reference/android/app/Activity.html#onPause()">onPause()</a> method has been called).  This may
occur, for example, if the foreground Activity is displayed as a dialog
that allows the previous Activity to be seen behind it.  Such a
process is considered extremely important and will not be killed unless doing so is
required to keep all foreground processes running.
</li>

<li>A <strong>service process</strong> is one holding a <a href="../reference/android/app/Service.html">Service</a>
that has been started with the
<a href="../reference/android/content/Context.html#startService(android.content.Intent)">startService()</a> method.  Though these
processes are not directly visible to the user, they are generally doing things
that the user cares about (such as background mp3 playback or background
network data upload or download), so the system will always keep such processes
running unless there is not enough memory to retain all foreground and visible process.
</li>

<li>A <strong>background process</strong> is one holding an <a href="../reference/android/app/Activity.html">Activity</a>
that is not currently visible to the user  (its
<a href="../reference/android/app/Activity.html#onStop()">onStop()</a> method has been called).  These processes
have no direct impact on the user experience.  Provided they implement
their Activity life-cycle correctly
(see <a href="../reference/android/app/Activity.html">Activity</a> for more details), the system
can kill such processes at any time to reclaim memory for one of the three
previous processes types.  Usually there are many of these processes running,
so they are kept in an LRU list to ensure the process that was most recently seen
by the user is the last to be killed when running low on memory.
</li>

<li>An <strong>empty process</strong> is one that doesn't hold any active application
components.  The only reason to keep such a process around is as a cache to
improve startup time the next time a component of its application needs to
run.  As such, the system will often kill these processes in order to
balance overall system resources between these empty cached processes and the
underlying kernel caches.
</li>

</ol>

<p>When deciding how to classify a process, the system will base its decision on the most
important level found among all the components currently active in the process.
See the <a href="../reference/android/app/Activity.html">Activity</a>, <a href="../reference/android/app/Service.html">Service</a>, and
<a href="../reference/android/content/BroadcastReceiver.html">BroadcastReceiver</a> documentation for more detail on how
each of these components contribute to the overall life-cycle of a process.
The documentation for each of these classes describes in more detail how
they impact the overall life-cycle of their application.</p>

<p>A process's priority may also be increased based on other dependencies
a process has to it.  For example, if process A has bound to a
<a href="../reference/android/app/Service.html">Service</a> with
the <a href="../reference/android/content/Context.html#BIND_AUTO_CREATE">Context.BIND_AUTO_CREATE</a>
flag or is using a
<a href="../reference/android/content/ContentProvider.html">ContentProvider</a> in process B, then process B's
classification will always be at least as important as process A's.</p>

</div>

</div>
</div><!-- end gc-pagecontent -->
</div><!-- end gooey wrapper -->

<div style="padding-left: 10px; padding-right: 10px; margin-top: 0; padding-bottom: 15px;">
    <table style="width: 100%; border:none;"><tr>
    <td style="border: none; width: 150px;"></td>
    <td style="text-align: left; font-size: 10pt; border: none; color: silver;">Copyright 2007 <a href="http://labs.google.com/">Google Inc.</a></td>
    <td style="text-align: right; font-size: 10pt; border: none; color: silver;">Build 119366-119366 - 19 Nov 2008 16:04</td>
    </tr></table>
</div>


</body>

</html>


